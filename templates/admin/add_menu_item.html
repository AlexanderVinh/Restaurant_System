{% extends "base.html" %}

{% block title %}Thêm Món - {{ restaurant_name }}{% endblock %}

{% block content %}
<div class="container">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card">
                <div class="card-header bg-success text-white">
                    <h4 class="mb-0"><i class="bi bi-plus-circle"></i> Thêm Món Mới</h4>
                </div>
                <div class="card-body">
                    <form method="POST" action="{{ url_for('admin.add_menu_item') }}" enctype="multipart/form-data">
                        <div class="mb-3">
                            <label for="name" class="form-label">Tên món *</label>
                            <input type="text" class="form-control" id="name" name="name" required>
                        </div>
                        
                        <div class="mb-3">
                            <label for="description" class="form-label">Mô tả *</label>
                            <textarea class="form-control" id="description" name="description" rows="3" required></textarea>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="category" class="form-label">Danh mục *</label>
                                <select class="form-select" id="category" name="category" required>
                                    <option value="">-- Chọn danh mục --</option>
                                    <option value="appetizer">Khai Vị</option>
                                    <option value="main_course">Món Chính</option>
                                    <option value="dessert">Tráng Miệng</option>
                                    <option value="beverage">Đồ Uống</option>
                                </select>
                            </div>
                            
                            <div class="col-md-6 mb-3">
                                <label for="price" class="form-label">Giá (VNĐ) *</label>
                                <input type="number" class="form-control" id="price" name="price" 
                                       min="0" step="1000" required>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="image" class="form-label">Hình ảnh</label>
                            <input type="file" class="form-control" id="image" name="image" 
                                   accept="image/*" onchange="previewImage(event)">
                            <div class="form-text">JPG, PNG hoặc GIF. Tối đa 5MB</div>
                            <img id="image-preview" class="mt-2" style="max-width: 200px; display: none;">
                        </div>
                        
                        <div class="mb-3">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="available" name="available" checked>
                                <label class="form-check-label" for="available">
                                    Còn hàng
                                </label>
                            </div>
                        </div>
                        
                        <hr>
                        
                        <div class="d-flex gap-2">
                            <button type="submit" class="btn btn-success">
                                <i class="bi bi-check-circle"></i> Thêm Món
                            </button>
                            <a href="{{ url_for('admin.menu') }}" class="btn btn-outline-secondary">
                                <i class="bi bi-x-circle"></i> Hủy
                            </a>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
function previewImage(event) {
    const file = event.target.files[0];
    const preview = $('#image-preview');
    
    if (file) {
        const reader = new FileReader();
        reader.onload = function(e) {
            preview.attr('src', e.target.result);
            preview.show();
        };
        reader.readAsDataURL(file);
    } else {
        preview.hide();
    }
}
</script>
{% endblock %}
